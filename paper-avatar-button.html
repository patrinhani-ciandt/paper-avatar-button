<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-button/paper-button-base.html">
<link rel="import" href="../paper-shadow/paper-shadow.html">

<!--
Element providithat extends 'paper-button-base' for displaying a avatar 'à la material design'.

##### Example

    <paper-avatar-button></paper-avatar-button>

@element paper-avatar-button
@extends paper-button-base
@blurb Element that extends 'paper-button-base' for displaying a avatar 'à la material design'.
@status alpha
@homepage http://BasicElements.github.io/paper-avatar-button
-->
<polymer-element name="paper-avatar-button" attributes="src size z" extends="paper-button-base">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        border-radius: 50%;
        overflow: hidden;
      }
      img {
        border-radius: 50%;
      }
    </style>
    <template if="{{raised}}">
      <paper-shadow z="{{z}}" fit animated></paper-shadow>
    </template>
    <img id="img"></img>
    <paper-ripple></paper-ripple>
  </template>
  <script>
    Polymer({
      publish: {
        /**
         * If true, the button will be styled with a shadow.
         *
         * @attribute raised
         * @type boolean
         * @default false
         */
        raised: false
      },

      /**
       * The url to the image.
       *
       * @attribute src
       * @type string
       * @default
       */

      /**
       * For changing the height & width.
       *
       * @attribute size
       * @type string
       * @default 32px
       */
      size: '32px',

      // always center the ripple.
      recenteringTouch: true,

      // constrain the ripple to a circle within the button.
      fill: false,

      ready: function() {
        this.style.height = this.size;
        this.style.width = this.size;
        this.$.img.style.height = this.size;
        this.$.img.style.width = this.size;
      },

      srcChanged: function() {
        if(this.src) {
          this.$.img.src = this.src;
        } else {
          this.$.img.removeAttribute('src');
        }
      }
    });
  </script>
</polymer-element>
